---
import type { CollectionEntry } from "astro:content";

import { postConfig } from "@/config";
import Twikoo from "./twikoo.astro";
import Giscus from "./giscus.astro";


interface Props {
    post: CollectionEntry<"posts">;
}

const { id } = Astro.props.post;

const path = `/posts/${id}/`;

let commentService = "";
if (postConfig.comment?.enable) {
    if (postConfig.comment?.giscus?.enable) {
        commentService = "giscus";
    } else if (postConfig.comment?.twikoo) {
        commentService = "twikoo";
    }
}
---

{postConfig.comment?.enable && (
    <div class="card-base p-6 mb-4">
        {commentService === 'giscus' && <Giscus path={path} />}
        {commentService === 'twikoo' && <Twikoo path={path} />}
        {commentService === '' && null}
    </div>
)}